SRC="demoWeb.war"; JOB_NM="123"; WRK_DIR="/root/123"; DPY_DIR="/opt/tomcat/webapps"; BKP_DIR="backup"; REM_RSE="/opt/tomcat/work/*"; STR_CMD=""; STP_CMD=""; [ -n "$STP_CMD" ] && $($STP_CMD); if [ -d "$WRK_DIR" ]; then (cd "$WRK_DIR";) else (echo "[ERROR] WORKING DIRCTORY : $WRK_DIR not exists"; exit 1;) fi; if [ "$SRC" != "*" ] && [ ! -e "./deploy/$SRC" ]; then exit 1; fi; [ ! -d "$DPY_DIR" ] && (echo "[ERROR] Deploy Directory : $DPY_DIR not exists"; exit 1;); [ -n "$BKP_DIR" ] && [ ! -d "$BKP_DIR" ] && (echo "[ERROR] Backup Directory : $BKP_DIR not exists"; exit 1 ;); [ -z "$BKP_DIR" ] && (mkdir "backup"; BKP_DIR="backup";); now_bkdir=$(pwd "backup"); new_bkdir=$(pwd "$BKP_DIR"); [ "$now_bkdir" != "$new_bkdir" ] && (mkdir "$BKP_DIR/$JOB_NM"; BKP_DIR="$BKP_DIR/$JOB_NM";); if [ -e "$DPY_DIR/$SRC" ]; then (cp "$DPY_DIR/$SRC" "$BKP_DIR/$SRC"; [ $? != 0 ] && (echo "[ERROR] Failure to Backup : $DPY_DIR/$SRC";exit 1 ;); rm -rf "$DPY_DIR/$SRC"; [ $? != 0 ] && (echo "[ERROR] Failure to Backup : $DPY_DIR/$SRC";exit 1;)) fi; if [ -n "$REM_RSE" ]; then ( for r in "$REM_RSE"; do (echo "delete $r"; [ -e $r ] && ( rm -rf $r )); done ) fi; cp $WRK_DIR/deploy/$SRC $DPY_DIR 2>/dev/null; [ $? != 0 ] && (echo "[ERROR] Failure to deploy : $WRK_DIR/deploy/$SRC"; exit 1 ;); if [ -n "$STR_CMD" ]; then ( $($STR_CMD); [ $? != 0 ] && (echo "[ERROR] Failure to Start Application : $STR_CMD"; exit 1 ;); ); fi 